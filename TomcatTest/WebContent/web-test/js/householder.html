<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8>
	<title>智能门禁管理系统-业主管理界面</title>
	<link rel="stylesheet" href="../css/householder.css" type="text/css" />
	<script src="jquery-3.3.1.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			var ttable = $("#people-table").clone(true);
			$("#row-new").hide();
			$("#edit-confirm").hide();
		    $("#edit-cancel").hide();
		    $(".row-delate").attr("disabled","true");
		    function editToggle(){
		    	$("#row-new").toggle();
		    	$("#edit-confirm").toggle();
		    	$("#edit-cancel").toggle();
		    	$("#edit").toggle();
		    	$("#upload").toggle();
		    }
		    $("#edit").click(function(){
		    	$("#people-table input").attr("disabled",false);
		    	editToggle();
		    	ttable = $("#people-table").clone(true);
		    	$(".row-delate").attr("disabled",false);
		  	});
		  	$("#row-new").click(function(){
		  		var new_tr = $("#people-table tr").eq(1).clone(true); 
		  		new_tr.find("input").attr("value","");
		  		$("#people-table").append(new_tr);
		  	});
		  	$("#edit-confirm").click(function(){
		  		$("#people-table input").attr("disabled",true);
		  		editToggle();
		  		$(".row-delate").attr("disabled","true");
		  	});
		  	$("#edit-cancel").click(function(){
		  		$("#people-table").replaceWith(ttable);
		  		$("#people-table input").attr("disabled",true);
		  		editToggle();
		  		$(".row-delate").attr("disabled","true");
		  	});
		  	$(".row-delate").click(function(){
		  		$(this).parent().parent().remove();
		  	});
		  	$("[name='Photo']").change(function(){
		  		console.log("change");
		  		var url = window.URL.createObjectURL(this.files.item(0));
		  		$(this).siblings().filter("#pre-photo").attr("src",url);
		  	});
		});
	</script>
</head>

<body>
	<div class="header">

	</div>
	<div class="main">
		<div id="container">
			<button id="edit" >编辑</button>
			<button id="upload">上传</button>
			<button id="row-new" >添加人员</button>
			<button id="edit-confirm" >确认</button>
			<button id="edit-cancel" >取消</button>
			<div id="people-show">
				<h2>人员名单</h2>
				<table id="people-table" border="1">
					<tr>
						<th>姓名</th>
						<th>照片</th>
						<th>电话</th>
						<th>访问期限</th>
						<th>操作</th>
					</tr>
					<tr>
						<td><input type="text" name="Name" value="吴" disabled="true" /></td>
						<td>
							<img  id="pre-photo" src="" />
							<input type="file" name="Photo" disabled="true" accept="image/jpeg,image/jpg" />
						</td>
						<td><input type="text" name="Tel" value="110" disabled="true" /></td>
						<td><input type="date" name="Date" value="2020-11-11" disabled="true" /></td>
						<td><button class="row-delate" >删除</button></td>
					</tr>
					<tr>
						<td><input type="text" name="Name" value="戴" disabled="true" /></td>
						<td>
							<img  id="pre-photo" src="" />
							<input type="file" name="Photo" disabled="true" accept="image/jpeg,image/jpg" />
						</td>
						<td><input type="text" name="Tel" value="120" disabled="true" /></td>
						<td><input type="date" name="Date" value="2020-11-11" disabled="true" /></td>
						<td><button class="row-delate" >删除</button></td>
					</tr>
				</table>
			</div>
      	</div>
	</div>
	<div class="footer">
		<div class="copyright">
			<p>版权所有 © coldcode 浙ICP备666号</p>
			<p>地址：浙江·杭州市留和路318号浙江科技学院习德楼C1-509 邮编：310023</p>
		</div>
	</div>
</body>
</html>